(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CShQ:function(t,e,a){"use strict";a.r(e),a.d(e,"MapboxModule",function(){return y});var o=a("ofXK"),n=a("tyNb"),r=a("ywjS"),i=a("4ZJM"),c=a("fXoL"),s=a("HoiU");const l=["mapa"],p=function(t){return{"background-color":t}};function d(t,e){if(1&t){const t=c.Mb();c.Lb(0,"li",5),c.Sb("click",function(){c.cc(t);const a=e.$implicit;return c.Ub().irMarcador(a.marker)})("dblclick",function(){c.cc(t);const a=e.index;return c.Ub().borrarMarcador(a)}),c.gc(1),c.Kb()}if(2&t){const t=e.index;c.Xb("ngStyle",c.Zb(2,p,e.$implicit.color)),c.yb(1),c.ic(" marcador ",t+1," ")}}let m=(()=>{class t{constructor(){this.zoomLevel=15,this.center=[-3.635976,38.093539],this.marcadores=[]}ngAfterViewInit(){this.mapa=new i.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.center,zoom:this.zoomLevel}),this.leerLocalStorage()}agregarMarcador(){const t="#xxxxxx".replace(/x/g,t=>(16*Math.random()|0).toString(16)),e=new i.Marker({draggable:!0,color:t}).setLngLat(this.center).addTo(this.mapa);this.marcadores.push({color:t,marker:e}),this.guardarMarcadoresLocalStorage(),e.on("dragend",()=>{this.guardarMarcadoresLocalStorage()})}irMarcador(t){this.mapa.flyTo({center:t.getLngLat()})}guardarMarcadoresLocalStorage(){const t=[];this.marcadores.forEach(e=>{const a=e.color,{lng:o,lat:n}=e.marker.getLngLat();t.push({color:a,centro:[o,n]})}),localStorage.setItem("marcadores",JSON.stringify(t))}leerLocalStorage(){localStorage.getItem("marcadores")&&JSON.parse(localStorage.getItem("marcadores")).forEach(t=>{const e=new i.Marker({color:t.color,draggable:!0}).setLngLat(t.centro).addTo(this.mapa);this.marcadores.push({marker:e,color:t.color}),e.on("dragend",()=>{this.guardarMarcadoresLocalStorage()})})}borrarMarcador(t){var e;null===(e=this.marcadores[t].marker)||void 0===e||e.remove(),this.marcadores.splice(t,1),this.guardarMarcadoresLocalStorage()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Cb({type:t,selectors:[["app-marcadores"]],viewQuery:function(t,e){if(1&t&&c.kc(l,1),2&t){let t;c.ac(t=c.Tb())&&(e.divMapa=t.first)}},decls:7,vars:1,consts:[[1,"list-group"],[1,"list-group-item","list-group-item-info",3,"click"],["class","list-group-item",3,"ngStyle","click","dblclick",4,"ngFor","ngForOf"],[1,"mapa-container"],["mapa",""],[1,"list-group-item",3,"ngStyle","click","dblclick"]],template:function(t,e){1&t&&(c.Lb(0,"ul",0),c.Lb(1,"li",1),c.Sb("click",function(){return e.agregarMarcador()}),c.gc(2," + Agregar "),c.Kb(),c.fc(3,d,2,4,"li",2),c.Kb(),c.Jb(4,"app-menu"),c.Jb(5,"div",3,4)),2&t&&(c.yb(3),c.Xb("ngForOf",e.marcadores))},directives:[o.i,s.a,o.j],styles:[".mapa-container[_ngcontent-%COMP%] {\n      height: 100%;\n      width: 100%; \n    }\n\n    .list-group[_ngcontent-%COMP%] {\n      position: fixed;\n      top: 100px;\n      right: 20px;\n      z-index: 99;\n    }\n    li[_ngcontent-%COMP%] {\n      cursor: pointer;\n    }"]}),t})();const b=["mapa"];let u=(()=>{class t{constructor(){this.lngLat=[0,0]}ngAfterViewInit(){const t=new i.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.lngLat,zoom:15,interactive:!1});(new i.Marker).setLngLat(this.lngLat).addTo(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Cb({type:t,selectors:[["app-mini-mapa"]],viewQuery:function(t,e){if(1&t&&c.kc(b,1),2&t){let t;c.ac(t=c.Tb())&&(e.divMapa=t.first)}},inputs:{lngLat:"lngLat"},decls:2,vars:0,consts:[["mapa",""]],template:function(t,e){1&t&&c.Jb(0,"div",null,0)},styles:["div[_ngcontent-%COMP%] {\n        width: 100%;\n        height: 150px;\n        margin: 0px;\n      }"]}),t})();function g(t,e){if(1&t&&(c.Lb(0,"div",6),c.Lb(1,"div",7),c.Jb(2,"app-mini-mapa",8),c.Lb(3,"div",9),c.Lb(4,"h5",10),c.gc(5),c.Kb(),c.Lb(6,"p",11),c.gc(7),c.Kb(),c.Kb(),c.Kb(),c.Kb()),2&t){const t=e.$implicit;c.yb(2),c.Xb("lngLat",t.lngLat),c.yb(3),c.ic(" ",t.titulo," "),c.yb(2),c.ic(" ",t.descripcion," ")}}let h=(()=>{class t{constructor(){this.propiedades=[{titulo:"Picos de Europa, Asturias",descripcion:"Declarado Parque Nacional en 1918",lngLat:[-4.827381,43.187991]},{titulo:"Valle de Ordesa y Monte Perdido, Huesca",descripcion:"Declarado Parque Nacional en 1918",lngLat:[.037214,42.662141]},{titulo:"Teide, Santa Crus de Tenerife ",descripcion:"Declarado Parque Nacional en 1954",lngLat:[-16.641716,28.272397]},{titulo:"Sierra Nevada, Granada",descripcion:"Declarado Parque Nacional en 1999",lngLat:[-3.399113,37.093463]}]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Cb({type:t,selectors:[["app-propiedades"]],decls:12,vars:1,consts:[[1,"row","mt-3"],[1,"col-2"],[1,"col"],[1,"row","container"],[1,"row"],["class","col-4 mb-2",4,"ngFor","ngForOf"],[1,"col-4","mb-2"],[1,"card"],[1,"card-img-top",3,"lngLat"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,e){1&t&&(c.Jb(0,"app-menu"),c.Lb(1,"div",0),c.Jb(2,"div",1),c.Lb(3,"div",2),c.Lb(4,"h1"),c.gc(5,"Lista de propiedades"),c.Kb(),c.Jb(6,"hr"),c.Kb(),c.Kb(),c.Lb(7,"div",3),c.Jb(8,"div",1),c.Lb(9,"div",2),c.Lb(10,"div",4),c.fc(11,g,8,3,"div",5),c.Kb(),c.Kb(),c.Kb()),2&t&&(c.yb(11),c.Xb("ngForOf",e.propiedades))},directives:[s.a,o.i,u],encapsulation:2}),t})();const f=["mapa"],L=[{path:"mapbox",children:[{path:"fullscreen",component:r.a},{path:"zoom-range",component:(()=>{class t{constructor(){this.zoomLevel=10,this.center=[-3.635976,38.093539]}ngOnDestroy(){this.mapa.off("zoom",()=>{}),this.mapa.off("zoomend",()=>{}),this.mapa.off("move",()=>{})}ngAfterViewInit(){this.mapa=new i.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.center,zoom:this.zoomLevel}),this.mapa.on("zoom",t=>{this.zoomLevel=this.mapa.getZoom()}),this.mapa.on("zoomend",t=>{this.mapa.getZoom()>18&&this.mapa.zoomTo(18)}),this.mapa.on("move",t=>{const e=t.target,{lng:a,lat:o}=e.getCenter();this.center=[a,o]})}zoomOut(){this.mapa.zoomOut()}zoomIn(){this.mapa.zoomIn()}zoomCambio(t){this.mapa.zoomTo(Number(t))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Cb({type:t,selectors:[["app-zoom-range"]],viewQuery:function(t,e){if(1&t&&c.kc(f,1),2&t){let t;c.ac(t=c.Tb())&&(e.divMapa=t.first)}},decls:17,vars:13,consts:[[1,"mapa-container"],["mapa",""],[1,"row"],[1,"col-12"],[1,"form-label"],["type","range","min","0","max","18",1,"form-range",3,"value","input"],["zoomInput",""],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary","float-end",2,"margin-left","60px",3,"click"]],template:function(t,e){if(1&t){const t=c.Mb();c.Jb(0,"app-menu"),c.Jb(1,"div",0,1),c.Lb(3,"div",2),c.Lb(4,"div",3),c.Lb(5,"label",4),c.gc(6),c.Vb(7,"number"),c.Vb(8,"number"),c.Vb(9,"number"),c.Kb(),c.Lb(10,"input",5,6),c.Sb("input",function(){c.cc(t);const a=c.bc(11);return e.zoomCambio(a.value)}),c.Kb(),c.Kb(),c.Lb(12,"div",3),c.Lb(13,"button",7),c.Sb("click",function(){return e.zoomOut()}),c.gc(14," - "),c.Kb(),c.Lb(15,"button",8),c.Sb("click",function(){return e.zoomIn()}),c.gc(16," + "),c.Kb(),c.Kb(),c.Kb()}2&t&&(c.yb(6),c.jc(" Zoom: ",c.Wb(7,4,e.zoomLevel,"2.0-2")," - Lng,Lat: [ ",c.Wb(8,7,e.center[0],"2.4-4"),", ",c.Wb(9,10,e.center[1],"2.4-4")," ] "),c.yb(4),c.Xb("value",e.zoomLevel))},directives:[s.a],pipes:[o.d],styles:[".mapa-container[_ngcontent-%COMP%] {\n      height: 100%;\n      width: 100%; \n    }\n\n    .row[_ngcontent-%COMP%] {\n      background-color: #C0E5DE;\n      border-radius: 10px;\n      bottom: 50px;\n      left: 50px;\n      padding: 10px;\n      position: fixed;\n      z-index: 999;\n      width: 400px;\n    }"]}),t})()},{path:"marcadores",component:m},{path:"propiedades",component:h},{path:"**",redirectTo:"fullscreen"}]}];let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({imports:[[n.e.forChild(L)],n.e]}),t})(),y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({imports:[[o.b,v]]}),t})()}}]);